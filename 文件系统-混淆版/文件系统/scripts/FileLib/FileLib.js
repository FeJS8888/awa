/*Obfuscated by JShaman.com*/import{world}from'@minecraft/server';import{getScore,log,mc,overworld,runCommand}from'../DefineLib/DefineLib';function commonError(){log('§4未找到File根部');}var File={'Root':Array['from'](overworld['getEntities']({'name':'File(root)','type':'file:dir'}))[0x7f5a3^0x7f5a3],'currentPath':world['scoreboard']['getObjective']('File')!=undefined?world['scoreboard']['getObjective']('File')['getParticipants']()['find'](_0x310de5=>{return _0x310de5['displayName']['startsWith']('currentPath->');})==undefined?'File(root)':world['scoreboard']['getObjective']('File')['getParticipants']()['find'](_0xd79299=>{return _0xd79299['displayName']['startsWith']('currentPath->');})['displayName']['substring'](0x95e29^0x95e24):undefined,'touch'(_0x1dafd2){if(!this['inited']){commonError();return undefined;}const _0x23438e=getScore('File','x');const _0x389203=getScore('File','y');const _0x5e700c=getScore('File','z');var _0x31b923=overworld['spawnEntity']('file:file',new mc['Location'](_0x23438e,_0x389203,_0x5e700c));_0x31b923['nameTag']=_0x1dafd2;_0x31b923['addTag']('protected');var _0x118cc1='';var _0x169792='File(root)';const _0x664ab5=_0x1dafd2['split']('/');for(var _0x285c22=0xa367c^0xa367c;_0x285c22<_0x664ab5['length']-(0xe8a80^0xe8a81);++_0x285c22){_0x118cc1+=_0x664ab5[_0x285c22]+'/';const _0x28e7c3=Array['from'](overworld['getEntities']({'name':_0x118cc1,'type':'file:dir'}))[0x6262d^0x6262d];if(_0x28e7c3==undefined){const _0x45d24b=overworld['spawnEntity']('file:dir',new mc['Location'](_0x23438e,_0x389203,_0x5e700c));_0x45d24b['addTag']('protected');_0x45d24b['nameTag']=_0x118cc1;}Array['from'](overworld['getEntities']({'name':_0x169792,'type':'file:dir'}))[0x4bce5^0x4bce5]['addTag'](_0x118cc1);_0x169792=_0x118cc1;}Array['from'](overworld['getEntities']({'name':_0x169792,'type':'file:dir'}))[0x988eb^0x988eb]['addTag'](_0x1dafd2);log('§2创建文件成功');return _0x31b923;},'writeTo'(_0x532d59,_0x1e5631){if(!this['inited']){commonError();return undefined;}var _0x2c754a={};_0x2c754a['name']=_0x532d59;_0x2c754a['type']='file:file';const _0x3f2b7f=Array['from'](overworld['getEntities'](_0x2c754a))[0x2e30e^0x2e30e];if(_0x3f2b7f==undefined)this['touch'](_0x532d59)['addTag'](_0x1e5631);else{_0x3f2b7f['getTags']()['forEach'](_0x121e97=>{_0x3f2b7f['removeTag'](_0x121e97);});_0x3f2b7f['addTag']('protected');_0x3f2b7f['addTag'](_0x1e5631);}log('§2写入文件成功');return _0x532d59;},'writeLine'(_0x5d5be4,_0x105a49){if(!this['inited']){commonError();return undefined;}var _0x5b3e88={};_0x5b3e88['name']=_0x5d5be4;_0x5b3e88['type']='file:file';const _0x4c2520=Array['from'](overworld['getEntities'](_0x5b3e88))[0x30573^0x30573];if(_0x4c2520==undefined)this['touch'](_0x5d5be4)['addTag'](_0x105a49);else{var _0x5149f8=File['readFrom'](_0x5d5be4);_0x4c2520['removeTag'](_0x5149f8);_0x5149f8+=(_0x5149f8==''?'':'\x0a')+_0x105a49;_0x4c2520['addTag'](_0x5149f8);}log('§2写入文件成功');return _0x5d5be4;},'uninit'(_0x595b88){runCommand('tp\x20@e[type=file:file]\x20'+_0x595b88['x']+'\x20'+_0x595b88['y']+'\x20'+_0x595b88['z']);runCommand('tp\x20@e[type=file:dir]\x20'+_0x595b88['x']+'\x20'+_0x595b88['y']+'\x20'+_0x595b88['z']);if(world['scoreboard']['getObjective']('File')&&getScore('File','inited'))runCommand('scoreboard\x20players\x20reset\x20\x22inited\x22\x20File');runCommand('tickingarea\x20remove\x20File');this['inited']=![];log('OK');},'init'(_0x3c6e17){if(!world['scoreboard']['getObjective']('File'))world['scoreboard']['addObjective']('File','File');var _0x5d0db2={};_0x5d0db2['type']='file:dir';_0x5d0db2['name']='File(root)';runCommand('scoreboard\x20players\x20set\x20\x22currentPath->File(root)\x22\x20File\x201');this['currentPath']='File(root)';runCommand('scoreboard\x20players\x20set\x20\x22inited\x22\x20File\x201');runCommand('tickingarea\x20add\x20'+_0x3c6e17['x']['toFixed']()+'\x20'+_0x3c6e17['y']['toFixed']()+'\x20'+_0x3c6e17['z']['toFixed']()+'\x20'+_0x3c6e17['x']['toFixed']()+'\x20'+_0x3c6e17['y']['toFixed']()+'\x20'+_0x3c6e17['z']['toFixed']()+'\x20File\x20true');if(Array['from'](overworld['getEntities'](_0x5d0db2))['length']==(0x826e8^0x826e8)){var _0x245f02=overworld['spawnEntity']('file:dir',_0x3c6e17);_0x245f02['nameTag']='File(root)';_0x245f02['addTag']('protected');}runCommand('scoreboard\x20players\x20set\x20\x22x\x22\x20File\x20'+_0x3c6e17['x']['toFixed']());runCommand('scoreboard\x20players\x20set\x20\x22y\x22\x20File\x20'+_0x3c6e17['y']['toFixed']());runCommand('scoreboard\x20players\x20set\x20\x22z\x22\x20File\x20'+_0x3c6e17['z']['toFixed']());this['inited']=!![];this['Root']=Array['from'](overworld['getEntities']({'name':'File(root)','type':'file:dir'}))[0x573e8^0x573e8];log('OK');},'delete'(_0x2347ec,_0x2ee9fb){_0x2ee9fb=_0x2ee9fb==undefined?![]:_0x2ee9fb;const _0x4f6a68=Array['from'](overworld['getEntities']({'name':_0x2347ec,'type':_0x2347ec['endsWith']('/')?'file:dir':'file:file'}))[0x0];if(!_0x4f6a68){if(_0x2ee9fb)log('§4未找到该文件');return null;}if(_0x2347ec['endsWith']('/'))_0x4f6a68['getTags']()['forEach'](_0xceb9d=>{if(!(_0xceb9d=='protected'))this['delete'](_0xceb9d);});Array['from'](overworld['getEntities']({'name':_0x2347ec['endsWith']('/')&&_0x2347ec['split']('/')['length']==(0x3438f^0x3438d)||!_0x2347ec['endsWith']('/')&&_0x2347ec['split']('/')['length']==(0x83829^0x83828)?'File(root)':_0x2347ec['substring'](0x0,_0x2347ec['length']-_0x2347ec['split']('/')['pop']()['length']),'type':'file:dir'}))[0x0]['removeTag'](_0x2347ec);_0x4f6a68['removeTag']('protected');_0x4f6a68['kill']();if(_0x2ee9fb)log('§4删除文件成功');},'deleteLine'(_0x15675e,_0x5cb0b7){const _0x1370a0=File['readFrom'](_0x15675e);const _0x19b840=Array['from'](overworld['getEntities']({'name':_0x15675e,'type':'file:file'}))[0x0];if(_0x19b840==undefined){log('§4未找到该文件');return null;}_0x19b840['removeTag'](_0x19b840['getTags']()['find'](_0x234c46=>{return _0x234c46!='protected';}));var _0x3807fc='';for(var _0x2378d1=0xcf01b^0xcf01b;_0x2378d1<_0x1370a0['split']('\x0a')['length']-_0x5cb0b7;++_0x2378d1)_0x3807fc+=_0x1370a0['split']('\x0a')[_0x2378d1];_0x19b840['addTag'](_0x3807fc);log('§2写入文件成功');},'copy'(_0x4ba1fa,_0x224b40){if(!this['exsits'](_0x4ba1fa))log('§4未找到该文件');else this['writeTo'](_0x224b40,this['readFrom'](_0x4ba1fa));},'move'(_0x2989ff,_0x5184b7){log(_0x2989ff);log(_0x5184b7);if(!this['exsits'](_0x2989ff))log('§4未找到该文件');else{this['copy'](_0x2989ff,_0x5184b7);this['delete'](_0x2989ff);}},'merge'(_0x13add1,..._0x4543cf){var _0x39ac99='';_0x4543cf['forEach'](_0x3bcaaa=>{_0x39ac99+=this['readFrom'](_0x3bcaaa)==undefined?'':this['readFrom'](_0x3bcaaa)+'\x0a';});log(_0x4543cf);this['writeTo'](_0x13add1,_0x39ac99);},'zip'(){str='$~ZIP~$\x0a';},'unzip'(){},'mkdir'(_0x43ea5b){if(!this['inited']){commonError();return undefined;}const _0x1e5e6d=getScore('File','x');const _0x58484c=getScore('File','y');const _0x11d7ba=getScore('File','z');var _0x174895=overworld['spawnEntity']('file:dir',new mc['Location'](_0x1e5e6d,_0x58484c,_0x11d7ba));_0x174895['nameTag']=_0x43ea5b;_0x174895['addTag']('protected');var _0xb23b88='';var _0x490ef0='File(root)';const _0x40195a=_0x43ea5b['split']('/');for(var _0x50c8ba=0x0;_0x50c8ba<_0x40195a['length']-(0x65748^0x6574a);++_0x50c8ba){_0xb23b88+=_0x40195a[_0x50c8ba]+'/';const _0x151a0a=Array['from'](overworld['getEntities']({'name':_0xb23b88,'type':'file:dir'}))[0x0];if(_0x151a0a==undefined){const _0x118b6e=overworld['spawnEntity']('file:dir',new mc['Location'](_0x1e5e6d,_0x58484c,_0x11d7ba));_0x118b6e['addTag']('protected');_0x118b6e['nameTag']=_0xb23b88;}Array['from'](overworld['getEntities']({'name':_0x490ef0,'type':'file:dir'}))[0x54a14^0x54a14]['addTag'](_0xb23b88);_0x490ef0=_0xb23b88;}Array['from'](overworld['getEntities']({'name':_0x490ef0,'type':'file:dir'}))[0x0]['addTag'](_0x43ea5b);log('§2创建文件夹成功');return _0x174895;},'readFrom'(_0x2fc972,_0x3436fb){_0x3436fb=_0x3436fb==undefined?![]:_0x3436fb;if(Array['from'](overworld['getEntities']({'type':'file:file','name':_0x2fc972}))[0xda73f^0xda73f]==undefined){if(_0x3436fb)log('§4未找到该文件');return null;}var _0x5d1ac6=Array['from'](overworld['getEntities']({'type':'file:file','name':_0x2fc972}))[0x0]['getTags']()['find'](_0x258d34=>{return _0x258d34!='protected';});_0x5d1ac6=_0x5d1ac6==undefined?'':_0x5d1ac6;if(_0x3436fb)log('§e=========§r\x20§2'+_0x2fc972+'\x20§e=========§r\x0a'+_0x5d1ac6+'\x0a§e=========§r\x20§1EOF§r\x20§e=========§r');return _0x5d1ac6;},'cd'(_0x392be4){if(_0x392be4!='File(root)'){if(!_0x392be4['endsWith']('/'))_0x392be4+='/';if(!_0x392be4['endsWith']('/')){log('§4非文件夹');return undefined;}if(_0x392be4['startsWith']('./')){_0x392be4=(this['currentPath']!='File(root)'?this['currentPath']:'')+_0x392be4['substring'](0x2);}else if(_0x392be4['startsWith']('../')){if(this['currentPath']=='File(root)'){log('§4无法返回上级目录');return undefined;}_0x392be4=this['currentPath']['substring'](0x1b2cd^0x1b2cd,this['currentPath']['length']-(this['currentPath']['split']('/')[this['currentPath']['split']('/')['length']-0x2]['length']+0x1))+'/';if(_0x392be4=='/')_0x392be4='File(root)';}if(!this['exsits'](_0x392be4)&&_0x392be4!='File(root)'){log('§4目录不存在');return undefined;}}runCommand('scoreboard\x20players\x20reset\x20\x22currentPath->'+this['currentPath']+'\x22\x20File');runCommand('scoreboard\x20players\x20set\x20\x22currentPath->'+_0x392be4+'\x22\x20File\x201');this['currentPath']=_0x392be4;log('§2成功切换到'+_0x392be4);return _0x392be4;},'list'(_0x5a2d5f,_0x22284e){if(_0x5a2d5f=='File(root)')log('§eFile(root)');else if(_0x22284e==0x1)log('§e'+_0x5a2d5f['split']('/')[_0x5a2d5f['split']('/')['length']-0x2]);else log('|\x20'['repeat'](_0x22284e-0x1)+'§2'+_0x5a2d5f['split']('/')[_0x5a2d5f['split']('/')['length']-(0x8b361^0x8b363)]);Array['from'](overworld['getEntities']({'type':'file:dir','name':_0x5a2d5f}))[0x0]['getTags']()['sort']()['forEach'](_0x4297fe=>{if(_0x4297fe=='protected')return;if(_0x4297fe['endsWith']('/'))this['list'](_0x4297fe,_0x22284e+(0x50ebd^0x50ebc));else log('|\x20'['repeat'](_0x22284e)+_0x4297fe['split']('/')['pop']());});},'exsits'(_0x40f332){return!_0x40f332['endsWith']('/')?Array['from'](overworld['getEntities']({'name':_0x40f332,'type':'file:file'}))['length']==0x1:Array['from'](overworld['getEntities']({'name':_0x40f332,'type':'file:dir'}))['length']==(0x416f7^0x416f6);},'inited':world['scoreboard']['getObjective']('File')==undefined?![]:getScore('File','inited')==undefined?![]:!![]};world['events']['entityHurt']['subscribe'](_0x224b73=>{if(_0x224b73['hurtEntity']['hasTag']('protected')){const _0x12d050=overworld['spawnEntity'](_0x224b73['hurtEntity']['typeId'],_0x224b73['hurtEntity']['location']);_0x224b73['hurtEntity']['getTags']()['forEach'](_0x2a9fd5=>{_0x12d050['addTag'](_0x2a9fd5);});_0x12d050['nameTag']=_0x224b73['hurtEntity']['nameTag'];}});export{File};